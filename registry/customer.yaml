data_product: customer
entities:
  customer_profile:
    table: ${CATALOG}.${SCHEMA}.customer_profile
    key: customer_id
    columns:
      customer_id:
        scalar: String
      full_name:
        scalar: String
      primary_email:
        scalar: String
      phone:
        scalar: String
      country:
        scalar: String
      segment:
        scalar: String
      status:
        scalar: String
      created_at:
        scalar: Timestamp
      updated_at:
        scalar: Timestamp
    filters:
    - name: country
      type: STRING
      op: '='
      column: country
    - name: status
      type: STRING
      op: '='
      column: status
    - name: q
      type: STRING
      op: ILIKE
      column: full_name
    aliases:
    - get_customer
    - list_customers
    order_by_default: -updated_at
    pagination:
      default_limit: 50
      max_limit: 200
    policy:
      required_window: false
  customer_accounts:
    table: ${CATALOG}.${SCHEMA}.customer_accounts
    key: account_id
    columns:
      account_id:
        scalar: String
      customer_id:
        scalar: String
      plan_code:
        scalar: String
      billing_cycle_day:
        scalar: Int
      status:
        scalar: String
      created_at:
        scalar: Timestamp
      updated_at:
        scalar: Timestamp
    filters:
    - name: customer_id
      type: STRING
      op: '='
      column: customer_id
    aliases:
    - list_accounts
    order_by_default: -updated_at
    pagination:
      default_limit: 50
      max_limit: 200
    policy:
      required_window: false
  customer_subscriptions:
    table: ${CATALOG}.${SCHEMA}.customer_subscriptions
    key: subscription_id
    columns:
      subscription_id:
        scalar: String
      account_id:
        scalar: String
      product_id:
        scalar: String
      status:
        scalar: String
      start_date:
        scalar: Timestamp
      end_date:
        scalar: Timestamp
      created_at:
        scalar: Timestamp
      updated_at:
        scalar: Timestamp
    filters: []
    aliases: []
    order_by_default: null
    pagination:
      default_limit: 200
      max_limit: 2000
    policy:
      required_window: false
